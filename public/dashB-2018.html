<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>jQuery Loading Local JSON File</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://kit.fontawesome.com/57d9119a00.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.9.0.min.js"></script>
  <link rel="stylesheet" href="/out-css/dashStyles.css">
</head>

<body class="mb-12 bg-slate-100">
  <div class="sticky top-0 z-50">
    <div class="">
      <div class="flex py-4 px-3 bg-green-900">
        <div class="flex-1 w-1/2">
          <a id="homeBtn" class="flex pl-2.5">
            <img src="/media/logo.png" class="cursor-pointer " alt="UNCC-logo" />
            <span
              class="self-center cursor-pointer  text-3xl font-semibold whitespace-nowrap dark:text-white">pats.</span>
          </a>
        </div>
        <ul class="space-y-2 mt-3 mr-6">
          <li class="mb-6">
            <p href="#" class="flex items-center p-2 text-base font-normal rounded-lg text-gray-400 animate-pulse">
              <svg class="w-6 h-6 fill-current text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  d="M156.6 384.9L125.7 353.1C117.2 345.5 114.2 333.1 117.1 321.8C120.1 312.9 124.1 301.3 129.8 288H24C15.38 288 7.414 283.4 3.146 275.9C-1.123 268.4-1.042 259.2 3.357 251.8L55.83 163.3C68.79 141.4 92.33 127.1 117.8 127.1H200C202.4 124 204.8 120.3 207.2 116.7C289.1-4.07 411.1-8.142 483.9 5.275C495.6 7.414 504.6 16.43 506.7 28.06C520.1 100.9 516.1 222.9 395.3 304.8C391.8 307.2 387.1 309.6 384 311.1V394.2C384 419.7 370.6 443.2 348.7 456.2L260.2 508.6C252.8 513 243.6 513.1 236.1 508.9C228.6 504.6 224 496.6 224 488V380.8C209.9 385.6 197.6 389.7 188.3 392.7C177.1 396.3 164.9 393.2 156.6 384.9V384.9zM384 167.1C406.1 167.1 424 150.1 424 127.1C424 105.9 406.1 87.1 384 87.1C361.9 87.1 344 105.9 344 127.1C344 150.1 361.9 167.1 384 167.1z" />
              </svg>
              <span class="ml-3">Dashboard</span>
            </p>
          </li>
          <li>
            <a id="aboutBtn"
              class="flex cursor-pointer items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 transition ease-in-out delay-150 hover:-translate-y-1">
              <svg class="w-6 h-6 fill-current text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                <path
                  d="M184 88C184 118.9 158.9 144 128 144C97.07 144 72 118.9 72 88C72 57.07 97.07 32 128 32C158.9 32 184 57.07 184 88zM208.4 196.3C178.7 222.7 160 261.2 160 304C160 338.3 171.1 369.8 192 394.5V416C192 433.7 177.7 448 160 448H96C78.33 448 64 433.7 64 416V389.2C26.16 371.2 0 332.7 0 288C0 226.1 50.14 176 112 176H144C167.1 176 190.2 183.5 208.4 196.3V196.3zM64 245.7C54.04 256.9 48 271.8 48 288C48 304.2 54.04 319.1 64 330.3V245.7zM448 416V394.5C468 369.8 480 338.3 480 304C480 261.2 461.3 222.7 431.6 196.3C449.8 183.5 472 176 496 176H528C589.9 176 640 226.1 640 288C640 332.7 613.8 371.2 576 389.2V416C576 433.7 561.7 448 544 448H480C462.3 448 448 433.7 448 416zM576 330.3C585.1 319.1 592 304.2 592 288C592 271.8 585.1 256.9 576 245.7V330.3zM568 88C568 118.9 542.9 144 512 144C481.1 144 456 118.9 456 88C456 57.07 481.1 32 512 32C542.9 32 568 57.07 568 88zM256 96C256 60.65 284.7 32 320 32C355.3 32 384 60.65 384 96C384 131.3 355.3 160 320 160C284.7 160 256 131.3 256 96zM448 304C448 348.7 421.8 387.2 384 405.2V448C384 465.7 369.7 480 352 480H288C270.3 480 256 465.7 256 448V405.2C218.2 387.2 192 348.7 192 304C192 242.1 242.1 192 304 192H336C397.9 192 448 242.1 448 304zM256 346.3V261.7C246 272.9 240 287.8 240 304C240 320.2 246 335.1 256 346.3zM384 261.7V346.3C393.1 335 400 320.2 400 304C400 287.8 393.1 272.9 384 261.7z" />
              </svg>
              <span class="flex-1 ml-3 whitespace-nowrap">About us</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class=" p-12 pr-16">
    <div class="flex flex-row">
      <div class="basis-1/4">
        <div class="flex justify-between">
          <!-- transition ease-in-out delay-150 border-b-4 hover:border-b-8 border-green-900 pt-6 hover:pt-5 -->
          <a id="2019"
            class="transition ease-in-out delay-150 border-b-4 pt-6 border-green-900 hover:scale-125">2019|20</a>
          <a id="2020"
            class="transition ease-in-out delay-150 border-b-4 pt-6 border-green-900 hover:scale-125">2020|21</a>
        </div>
      </div>
      <div class="basis-1/4"></div>
      <div class="basis-1/4"></div>
      <h1 class="text-right text-5xl w-full basis-1/4">2018|19</h1>
    </div>
    <hr style="padding-top: 2px;">
    <img class='pt-3' class="h-8" src="/media/homepage.png" style="background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover; width:100%; height: 200px; object-fit: none;" alt="banner-img">
  </div>
  <div class="flex lg:flex-row  sm:flex-col lg:justify-center h-80 sm:justify-around mx-16 mb-6 sm:mt-12 lg:mt-0">
    <div class="flex-initial bg-white mr-8 lg:w-4/12 w-full sm:w-full h-80 rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Average Number of Passengers Per Hours</p>
      <p class="ml-6 text-slate-400">Bar Chart</p>
      <hr>
      <div class="w-full">
        <div id="tester" class="w-full h-64"></div>
        <script>
          const runBarChart = () => {
            fetch('/api/TimeVsPassengers2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((TimeVsPassengers2018_2019) => {

                const a = []
                const b = []
                var i = 0
                for (const element of TimeVsPassengers2018_2019) {
                  a[i] = element.Time;
                  b[i] = element.Riders;
                  i++
                }
                var data = [
                  {
                    x: a,

                    y: b,

                    type: 'bar'

                  }
                ];

                Plotly.newPlot('tester', data);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runBarChart();


        </script>

      </div>
    </div>
    <div class="flex-initial mr-8 bg-white lg:w-4/12 sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Most Popular Stops By Route</p>
      <p class="ml-6 text-slate-400">Stack Bar Chart</p>
      <hr>
      <div class="">
        <div id="StackBars" class="w-96 h-60"></div>
        <script>

          const runStackedBars = () => {
            fetch('/api/StopVsRouteVsCount2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((StopVsRouteVsCount2018_2019) => {

                const a = []
                const b = []
                const c = []
                var i = 0
                for (const element of StopVsRouteVsCount2018_2019) {
                  a[i] = element.Stop;
                  b[i] = element.Count;
                  c[i] = element.Route;
                  i++
                }
                var trace1 = {
                  x: a,
                  y: b,
                  name: 'Stop',
                  type: 'scatter'
                };

                var trace2 = {
                  x: c,
                  y: b,
                  name: 'Route',
                  type: 'scatter'
                };
                var data = [trace1, trace2];

                Plotly.newPlot('StackBars', data);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runStackedBars();
        </script>
      </div>
    </div>
    <div class="flex-initial mr-8 lg:w-4/12 bg-white sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Top 5 Most Popular Routes</p>
      <p class="ml-6 text-slate-400">Pie Chart</p>
      <hr>
      <div class="">
        <div id="PieChart" class="w-full h-60"></div>
        <script>
          const runPieChart = () => {
            fetch('/api/RouteVsCount2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((RouteVsCount2018_2019) => {

                const a = []
                const b = []
                var i = 0
                for (const element of RouteVsCount2018_2019) {
                  a[i] = element.Route;
                  b[i] = element.Count;
                  i++
                }
                var data = [
                  {
                    values: b,
                    labels: a,

                    type: 'pie'

                  }
                ];
                var layout = {
                  height: 255,
                  width: 384
                };
                var config = { responsive: true }

                Plotly.newPlot('PieChart', data, layout, config);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runPieChart();

        </script>

        </script>

      </div>
    </div>
  </div>




  <div class="flex lg:flex-row sm:flex-col lg:justify-center sm:justify-around mx-16 mb-6 sm:mt-12 lg:mt-0">
    <div class="flex-initial mr-8 h-96 bg-white lg:w-1/2 sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Top 5 Most Used Buses By Bus Number</p>
      <p class="ml-6 text-slate-400">Pie Chart</p>
      <hr>
      <div class="">
        <div id="PieChart2" style="width:600px;height:300px;"></div>
        <script>
          const runPieChart2 = () => {
            fetch('/api/BusVsCount2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((BusVsCount2018_2019) => {

                const a = []
                const b = []
                var i = 0
                for (const element of BusVsCount2018_2019) {
                  a[i] = element.Bus;
                  b[i] = element.Count;
                  i++
                }
                var data = [
                  {
                    values: b,
                    labels: a,

                    type: 'pie'

                  }
                ];
                var layout = {
                  height: 255,
                  width: 384
                };
                var config = { responsive: true }

                Plotly.newPlot('PieChart2', data, layout, config);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runPieChart2();
        </script>


      </div>
    </div>

    <div class="flex-initial mr-8 h-96 bg-white lg:w-1/2 sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Number of bus riders per month</p>
      <p class="ml-6 text-slate-400">Trend Chart</p>
      <hr>
      <div class="">
        <div id="LineChart2" style="width:600px;height:300px;"></div>
        <script>
          const runLineChart = () => {
            fetch('/api/MonthVsCount2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((MonthVsCount2018_2019) => {

                const a = []
                const b = []
                var i = 0
                for (const element of MonthVsCount2018_2019) {
                  a[i] = element.Date;
                  b[i] = element.Count;
                  i++
                }
                var data = [
                  {
                    x: a,
                    y: b,
                    type: 'scatter'
                  }
                ];

                Plotly.newPlot('LineChart2', data);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runLineChart();
        </script>
      </div>
    </div>
  </div>


  <div class="flex lg:flex-row sm:flex-col lg:justify-center sm:justify-around mx-16 sm:mt-12 lg:mt-0">
    <div class="flex-initial mr-8 bg-white h-96 lg:w-1/2 sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Morning vs Afternoon Bus Riders</p>
      <p class="ml-6 text-slate-400">Pie Chart</p>
      <hr>
      <div class="">
        <div id="DoubleLineChart" style="width:600px;height:315px;"></div>
        <script>
          const runDoubleLineChart = () => {
            fetch('/api/transit', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((transitData) => {

                const a = []
                const b = []
                var i = 0
                for (const element of transitData) {
                  a[i] = element.Stop;
                  b[i] = element.Count;
                  i++
                }
                var trace1 = {
                  x: ['7am', '8am', '9am', '10am', '11am'],
                  y: [725, 362, 69, 28, 27],
                  type: 'scatter',
                  name: 'Morning'

                };

                var trace2 = {
                  x: ['12pm', '1pm', '2pm', '3pm', '4pm'],
                  y: [900, 892, 790, 999, 786, 965, 867],
                  type: 'scatter',
                  name: 'Afternoon'
                };

                var data = [trace1, trace2];

                Plotly.newPlot('DoubleLineChart', data);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runDoubleLineChart();
        </script>
      </div>
    </div>
    <div class="flex-initial mr-8 h-96 bg-white lg:w-8/12 sm:w-full rounded border-2 border-slate-50 shadow-xl">
      <p class="ml-3 font-extrabold text-lg pt-3">Most Popular Stops</p>
      <p class="ml-6 text-slate-400">Bar Chart</p>
      <hr>
      <div class="">
        <div id="Bar2" style="width:600px;height:320px;"></div>
        <script>
          const runBarChart2 = () => {
            fetch('/api/StopVsCount2018_2019', {
              method: 'GET'
            })
              .then((response) => response.json())
              .then((StopVsCount2018_2019) => {

                const a = []
                const b = []
                var i = 0
                for (const element of StopVsCount2018_2019) {
                  a[i] = element.Stop;
                  b[i] = element.Count;
                  i++
                }
                var data = [
                  {
                    x: a,

                    y: b,

                    type: 'bar'

                  }
                ];

                Plotly.newPlot('Bar2', data);

              })
              .catch((error) => {
                console.error('Error:', error);
              });
          };

          runBarChart2();


        </script>
      </div>
    </div>
  </div>


</body>
<script>
  const homeBtn = document.getElementById('homeBtn');
  const aboutBtn = document.getElementById('aboutBtn');
  const btn2019 = document.getElementById('2019');
  const btn2020 = document.getElementById('2020');
  const btn2021 = document.getElementById('2021');

  const runTransitQuery = () => {
    fetch('/api/transit', {
      method: 'GET'
    })
      .then((response) => response.json())
      .then((transitData) => {
        console.log('transitData', transitData);

        for (var i = 0; i < 3; i++) {
          console.log(transitData[i].Bus, transitData[i].Latitude, transitData[i].Longitude);
        }

      })
      .catch((error) => {
        console.error('Error:', error);
      });
  };

  homeBtn.onclick = function () {
    window.location = '/';
  }
  aboutBtn.onclick = function () {
    window.location = '/about';
  }
  btn2019.onclick = function () {
    window.location = '/dashboard-2019';
  }
  btn2020.onclick = function () {
    window.location = '/dashboard-2020';
  }

  runTransitQuery();
</script>

</html>

</html>